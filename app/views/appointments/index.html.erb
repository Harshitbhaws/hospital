<% if @appointments %>
    <h1>Appointments</h1>
<% elsif @todays_appointments = Appointment.where(doctor_id: current_user.id,date: Date.today) %>
    <h1 class="appointments">Todays Appointments</h1>
    <table>
        <tr>
            <th>Name</th>
            <th>Address</th>
            <th>Date</th>
            <th>Confirmation</th>
            <th>Reject</th>
        </tr>
        <% @todays_appointments.each do |appointment| %>
        <tr> 
            <td><%= appointment.user.name %></td>&nbsp
            <td><%= appointment.address %></td>&nbsp
            <td><%= appointment.date %></td>&nbsp
            <td>
                <% if appointment.confirmation %>
                <%= "confirmed" %>
                <% else %>
                <%= link_to "confirm", confirmation_appointment_path(appointment) %>
                <% end %>
            </td>&nbsp
            <td>
                <% if appointment.reject %>
                <%= "rejected" %>
                <% else %>
                <%= link_to "reject", reject_appointment_path(appointment) %>
                <% end %>
            </td>&nbsp
        </tr>
        <% end %>
    </table>
    <%= will_paginate @todays_appointments %> 
<% elsif @appointments.approved %>
    <h1 class="approved">Approved Appointments</h1>
    <table>
        <tr>
            <% if current_user.doctor? %>
            <th>Name</th>
            <th>Address</th>
            <th>Date</th>
            <th>Confirmed</th>
            <% else %>
            <th>Doctor Name</th>
            <th>Date Time</th>
            <th>Edit</th>
            <th>Cancel</th>
            <% end %>
        </tr>
        <%= @approved_appointments.each do |appointment| %>
        <tr> 
            <% if current_user.doctor? %>
                <td><%= appointment.user.name %></td>&nbsp
                <td><%= appointment.address %></td>&nbsp
                <td><%= appointment.date %></td>&nbsp
                <% if appointment.confirmation %>
                    <td><%= "confirmed" %></td>
                <% end %>
            <% else %>
                <td><%= appointment.doctor&.name %>&nbsp &nbsp</td>
            <td><%= appointment.created_at %>&nbsp &nbsp</td>
            <td><%= link_to "Edit",edit_appointment_path(appointment) %>&nbsp &nbsp</td>
            <td><%= link_to "Cancel",appointment_path(appointment),method: :delete %></td>
            <% end %>
        </tr>
        <% end %>
    </table>
    <%= will_paginate @approved_appointments %>
<% elsif @appointment.rejected %>
    <h1 class="rejected">Rejected Appointments</h1>

    <table>
        <tr>
            <% if current_user.doctor? %>
            <th>Name</th>
            <th>Address</th>
            <th>Date</th>
            <th>Rejected</th>
            <% else %>
            <th>Doctor Name</th>
            <th>Date Time</th>
            <th>Edit</th>
            <th>Cancel</th>
            <% end %>
        </tr>
        <% @rejected_appointments.each do |appointment| %>
        <tr> 
            <% if current_user.doctor? %>
            <td><%= appointment.name %>&nbsp &nbsp</td>
            <td><%= appointment.address %></td>&nbsp
            <td><%= appointment.date %></td>&nbsp
            <% if appointment.reject %>
                <td><%= "rejected" %></td>
            <% end %>
            <% else %>
            <td><%= appointment.doctor&.name %>&nbsp &nbsp</td>
            <td><%= appointment.created_at %>&nbsp &nbsp</td>
            <td><%= link_to "Edit",edit_appointment_path(appointment) %>&nbsp &nbsp</td>
            <td><%= link_to "Cancel",appointment_path(appointment),method: :delete %></td>
            <% end %>
        </tr>
        <% end %>
    </table>
  <%= will_paginate @rejected_appointments %>
<% else %>
    <h1 class="all">All Appointments</h1>
    <table>
        <tr>
            <th>Doctor Name</th>
            <th>Date Time</th>
            <th>Confirmation</th>
            <th>Reject</th>  
        </tr>
        <% @all_appointments.each do |appointment| %>
        <tr> 
            <td><%= appointment.doctor&.name %>&nbsp &nbsp</td>
            <td><%= appointment.created_at %>&nbsp &nbsp</td>
            <td>
            <% if appointment.confirmation %>
            <%= "confirmed" %>
            <% else %> 
            <%= link_to "confirm", confirmation_appointment_path(appointment) %>
            <% end %>
        </td>&nbsp
        <td>
            <% if appointment.reject %>
            <%= "rejected" %>
            <% else %>
            <%= link_to "reject", reject_appointment_path(appointment) %>
            <% end %>
        </td>&nbsp
        </tr>
        <% end %>
    </table>
      <%= will_paginate @all_appointments %>
<% end %>
